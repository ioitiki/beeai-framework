{"version":3,"sources":["backend.ts"],"names":["Backend","Serializable","chat","embedding","constructor","models","Object","assign","fromName","input","asyncProperties","ChatModel","EmbeddingModel","fromProvider","provider","createSnapshot","loadSnapshot","snapshot"],"mappings":";;;;;;;;;AA6BO,MAAMA,gBAAgBC,6BAAAA,CAAAA;EA7B7B;;;AA8BEC,EAAAA,IAAAA;AACAC,EAAAA,SAAAA;AAEAC,EAAAA,WAAAA,CAAYC,MAAuB,EAAA;AACjC,IAAK,KAAA,EAAA;AACLC,IAAOC,MAAAA,CAAAA,MAAAA,CAAO,MAAMF,MAAAA,CAAAA;AACtB;AAEA,EAAA,aAAaG,SACXC,KACkB,EAAA;AAClB,IAAO,OAAA,IAAIT,OACT,CAAA,MAAMU,2BAAgB,CAAA;MACpBR,IAAMS,EAAAA,kBAAAA,CAAUH,QAASC,CAAAA,KAAAA,CAAMP,IAAI,CAAA;AACnCC,MAAAA,SAAAA,EAAWS,4BAAeJ,CAAAA,QAAAA,CAASC,KAAMN,CAAAA,SAAAA,IAAa,OAAA;AACxD,KAAA,CAAA,CAAA;AAEJ;AAEA,EAAA,aAAaU,aAAaC,QAA0C,EAAA;AAClE,IAAO,OAAA,MAAM,KAAKN,QAAS,CAAA;MACzBN,IAAMY,EAAAA,QAAAA;MACNX,SAAWW,EAAAA;KACb,CAAA;AACF;EAEAC,cAAiB,GAAA;AACf,IAAO,OAAA;AAAEb,MAAAA,IAAAA,EAAM,IAAKA,CAAAA,IAAAA;AAAMC,MAAAA,SAAAA,EAAW,IAAKA,CAAAA;AAAU,KAAA;AACtD;AAEAa,EAAAA,YAAAA,CAAaC,QAAkD,EAAA;AAC7DX,IAAOC,MAAAA,CAAAA,MAAAA,CAAO,MAAMU,QAAAA,CAAAA;AACtB;AACF","file":"backend.cjs","sourcesContent":["/**\n * Copyright 2025 Â© BeeAI a Series of LF Projects, LLC\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { Serializable } from \"@/internals/serializable.js\";\nimport { ChatModel } from \"@/backend/chat.js\";\nimport { EmbeddingModel } from \"@/backend/embedding.js\";\nimport { asyncProperties } from \"@/internals/helpers/promise.js\";\nimport { FullModelName } from \"@/backend/utils.js\";\nimport { ProviderName } from \"./constants.js\";\nimport { OptionalExcept } from \"@/internals/types.js\";\n\ninterface BackendModels {\n  chat: ChatModel;\n  embedding: EmbeddingModel;\n}\n\nexport class Backend extends Serializable implements BackendModels {\n  chat!: ChatModel;\n  embedding!: EmbeddingModel;\n\n  constructor(models: BackendModels) {\n    super();\n    Object.assign(this, models);\n  }\n\n  static async fromName(\n    input: OptionalExcept<Record<keyof BackendModels, FullModelName | ProviderName>, \"chat\">,\n  ): Promise<Backend> {\n    return new Backend(\n      await asyncProperties({\n        chat: ChatModel.fromName(input.chat),\n        embedding: EmbeddingModel.fromName(input.embedding || \"dummy\"),\n      }),\n    );\n  }\n\n  static async fromProvider(provider: ProviderName): Promise<Backend> {\n    return await this.fromName({\n      chat: provider,\n      embedding: provider,\n    });\n  }\n\n  createSnapshot() {\n    return { chat: this.chat, embedding: this.embedding };\n  }\n\n  loadSnapshot(snapshot: ReturnType<typeof this.createSnapshot>) {\n    Object.assign(this, snapshot);\n  }\n}\n"]}